<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡πÑ‡∏£ 80:20</title>
<style>
  body { font-family:"Prompt",sans-serif; background:#f6f8fa; margin:0; padding:20px; color:#333; }
  h1 { text-align:center; color:#2c3e50; font-size:1.4em; }
  table { width:100%; border-collapse:collapse; margin-top:15px; background:white; border-radius:10px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
  th,td { border-bottom:1px solid #ddd; padding:10px; text-align:center; font-size:0.9em; }
  th { background-color:#2c3e50; color:white; }
  input[type="number"] { width:110px; padding:5px; text-align:right; border:1px solid #ccc; border-radius:6px; }
  input[type="text"] { width:100%; padding:6px; border:1px solid #ccc; border-radius:6px; }
  .expense-row td { text-align:left; padding:8px 12px; }
  tfoot td { font-weight:bold; background:#ecf0f1; }
  button { margin-top:15px; width:100%; padding:10px; background:#3498db; color:white; border:none; border-radius:8px; font-size:1em; cursor:pointer; }
  @media(max-width:600px){ th,td{font-size:0.85em;padding:8px;} input[type="number"]{width:80px;} }
</style>
</head>
<body>

<h1>üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Å‡∏≥‡πÑ‡∏£ 80:20 (‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢)</h1>

<h2>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</h2>
<table>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á (‡∏•‡πá‡∏≠‡∏Å)</td>
  <td><strong><span id="shippingDisplay">250</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏´‡πâ‡∏á (‡∏•‡πá‡∏≠‡∏Å)</td>
  <td><strong><span id="iceDisplay">30</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï (‡∏•‡πá‡∏≠‡∏Å)</td>
  <td><strong><span id="internetDisplay">6</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏•‡πá‡∏≠‡∏Å</td>
  <td><input id="rent" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü</td>
  <td><input id="electric" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
<tr class="expense-row">
  <td>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</td>
  <td><input id="other" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
</table>

<h2>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
<table>
  <thead>
    <tr>
      <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
      <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô</th>
      <th>‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</th>
      <th>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</th>
      <th>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô 80%</th>
      <th>‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô 20%</th>
    </tr>
  </thead>
  <tbody id="productTable">
    <tr><td>‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
    <tr><td>‡πÑ‡∏Å‡πà‡∏´‡∏¢‡∏≠‡∏á</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
    <tr><td>‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏¥‡πà‡∏°</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
    <tr><td>‡πÄ‡∏õ‡∏µ‡πä‡∏¢‡∏∞</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
    <tr><td>‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
    <tr><td>‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏à</td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td><input type="number" min="0" value="0" onchange="calculate()"></td><td class="profit">0</td><td class="staff">0</td><td class="owner">0</td></tr>
  </tbody>
  <tfoot>
    <tr>
      <td>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td>
      <td>-</td>
      <td id="totalSale">0</td>
      <td id="totalProfit">0</td>
      <td id="totalStaff">0</td>
      <td id="totalOwner">0</td>
    </tr>
  </tfoot>
</table>

<button onclick="clearAll()">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

<script>
// ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏ß‡πâ)
const costList = { "‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å":25, "‡πÑ‡∏Å‡πà‡∏´‡∏¢‡∏≠‡∏á":20, "‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏¥‡πà‡∏°":10, "‡πÄ‡∏õ‡∏µ‡πä‡∏¢‡∏∞":25, "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà":15, "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏à":20 };

// ‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠
const SHIPPING = 250;
const ICE = 30;
const INTERNET = 6;

// ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤
document.getElementById('shippingDisplay').textContent = SHIPPING;
document.getElementById('iceDisplay').textContent = ICE;
document.getElementById('internetDisplay').textContent = INTERNET;

function calculate() {
  let totalProfit = 0, totalStaff = 0, totalOwner = 0, totalSale = 0;

  // ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏î‡πâ (‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å)
  const rent = parseFloat(document.getElementById("rent").value) || 0;
  const electric = parseFloat(document.getElementById("electric").value) || 0;
  const other = parseFloat(document.getElementById("other").value) || 0;

  const totalExpense = SHIPPING + ICE + INTERNET + rent + electric + other;

  const rows = Array.from(document.querySelectorAll("#productTable tr"));

  // ‡πÄ‡∏Å‡πá‡∏ö gross profit ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ñ‡∏ß‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô
  const rowData = rows.map(row=>{
    const product = row.cells[0].innerText;
    const qty = parseFloat(row.querySelectorAll("input")[0].value) || 0;
    const sale = parseFloat(row.querySelectorAll("input")[1].value) || 0;
    const cost = qty * (costList[product] || 0);
    const grossProfit = sale - cost; // ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏ö‡πÑ‡∏î‡πâ ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
    return { row, product, qty, sale, cost, grossProfit };
  });

  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏£‡∏ß‡∏° gross profit
  totalSale = rowData.reduce((s, r) => s + r.sale, 0);
  const sumGrossProfit = rowData.reduce((s, r) => s + r.grossProfit, 0);

  if (sumGrossProfit !== 0) {
    // ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô grossProfit ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
    rowData.forEach(r=>{
      const allocatedExpense = (r.grossProfit / sumGrossProfit) * totalExpense;
      const netProfit = r.grossProfit - allocatedExpense;

      const staff = netProfit * 0.8;
      const owner = netProfit * 0.2;

      r.row.querySelector(".profit").textContent = netProfit.toFixed(2);
      r.row.querySelector(".staff").textContent = staff.toFixed(2);
      r.row.querySelector(".owner").textContent = owner.toFixed(2);

      totalProfit += netProfit;
      totalStaff += staff;
      totalOwner += owner;
    });
  } else {
    // ‡πÑ‡∏°‡πà‡∏°‡∏µ gross profit: ‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏≥‡πÑ‡∏£‡πÅ‡∏ñ‡∏ß‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏´‡∏•‡∏±‡∏á‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
    rowData.forEach(r=>{
      r.row.querySelector(".profit").textContent = (0).toFixed(2);
      r.row.querySelector(".staff").textContent = (0).toFixed(2);
      r.row.querySelector(".owner").textContent = (0).toFixed(2);
    });

    totalProfit = -totalExpense;
    totalStaff = totalProfit * 0.8;
    totalOwner = totalProfit * 0.2;
  }

  document.getElementById("totalSale").textContent = totalSale.toFixed(2);
  document.getElementById("totalProfit").textContent = totalProfit.toFixed(2);
  document.getElementById("totalStaff").textContent = totalStaff.toFixed(2);
  document.getElementById("totalOwner").textContent = totalOwner.toFixed(2);
}

function clearAll(){
  // ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢) ‡πÅ‡∏ï‡πà‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÑ‡∏ß‡πâ
  document.querySelectorAll("#productTable input").forEach(i=>i.value=0);
  calculate();
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
window.addEventListener('DOMContentLoaded', calculate);
</script>

</body>
</html>
