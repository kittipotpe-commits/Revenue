<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</title>
<style>
  :root{
    --brand-red:#c8102e;
    --brand-dark:#8b0f21;
    --muted:#f4f4f4;
    --text:#222;
  }
  body {
    font-family: "Prompt", sans-serif;
    background: white;
    margin:0;
    padding:20px;
    color:var(--text);
  }
  .header {
    display:flex;
    align-items:center;
    gap:14px;
    padding:14px 18px;
    border-radius:10px;
    background: linear-gradient(90deg, var(--brand-red) 0%, var(--brand-red) 100%);
    color:white;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    margin-bottom:14px;
  }
  #logo {
    width:64px;
    height:64px;
    object-fit:cover;
    border-radius:10px;
    background:white;
    padding:6px;
  }
  h1 {
    margin:0;
    font-size:1.3rem;
    font-weight:600;
  }

  table { width:100%; border-collapse:collapse; margin-top:6px; background:white; border-radius:10px; overflow:hidden; box-shadow:0 2px 5px rgba(0,0,0,0.06); }
  th, td { border-bottom:1px solid #eee; padding:10px; text-align:center; font-size:0.95em; }
  thead th { background:var(--brand-red); color:white; font-weight:600; }
  .expense-row td { text-align:left; padding:10px 14px; color:var(--text); }
  input[type="number"] { width:110px; padding:6px; text-align:right; border:1px solid #ddd; border-radius:6px; }
  .muted-box { background:var(--muted); padding:6px 10px; border-radius:6px; }
  tfoot td { font-weight:bold; background:#fafafa; }
  button { margin-top:15px; width:100%; padding:10px; background:var(--brand-red); color:white; border:none; border-radius:8px; font-size:1em; cursor:pointer; }
  .sales-total { margin-top:12px; display:flex; gap:8px; align-items:center; justify-content:flex-end; }
  .below-sales { margin-top:10px; display:flex; gap:12px; justify-content:flex-end; align-items:center; font-size:0.95em; color:#222; }
  .below-sales div { background:#fff; padding:6px 10px; border-radius:6px; border:1px solid #eee; }
  @media(max-width:600px){
    thead th, th, td { font-size:0.85em; padding:8px; }
    input[type="number"]{ width:80px; }
    .sales-total{ flex-direction:column; align-items:stretch; }
    .below-sales{ flex-direction:column; align-items:flex-end; }
  }
</style>
</head>
<body>

<!-- Header with logo + title -->
<div class="header">
  <!-- üí∞üí∞üí∞üí∞ -->
  <img id="logo" src="logo.png" alt="logo">
  <div>
    <h1>‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô</h1>
    <div style="font-size:0.9rem; opacity:0.9;">‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡πÅ‡∏•‡∏∞‡∏´‡∏±‡∏Å‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ </div>
  </div>
</div>

<h2 style="margin:0 0 8px 0; font-size:1rem;">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</h2>
<table>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á </td>
  <td><strong><span id="shippingDisplay">250</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏´‡πâ‡∏á </td>
  <td><strong><span id="iceDisplay">30</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï </td>
  <td><strong><span id="internetDisplay">6</span> ‡∏ö‡∏≤‡∏ó</strong></td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏•‡πá‡∏≠‡∏Å</td>
  <td><input id="rent" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
<tr class="expense-row">
  <td>‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü</td>
  <td><input id="electric" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
<tr class="expense-row">
  <td>‡∏≠‡∏∑‡πà‡∏ô‡πÜ</td>
  <td><input id="other" type="number" min="0" value="0" onchange="calculate()"> ‡∏ö‡∏≤‡∏ó</td>
</tr>
</table>

<h2 style="margin-top:14px; font-size:1rem;">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
<table>
  <thead>
    <tr>
      <th>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
      <th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡∏¥‡πâ‡∏ô</th>
      <th>‡∏Å‡∏≥‡πÑ‡∏£‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</th>
      <th>‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô 80%</th>
      <th>‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô 20%</th>
    </tr>
  </thead>
  <tbody id="productTable">
    <tr><td>‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
    <tr><td>‡πÑ‡∏Å‡πà‡∏´‡∏¢‡∏≠‡∏á</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
    <tr><td>‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏¥‡πà‡∏°</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
    <tr><td>‡πÄ‡∏õ‡∏µ‡πä‡∏¢‡∏∞</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
    <tr><td>‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
    <tr><td>‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏à</td><td><input class="qty" type="number" min="0" value="0" onchange="calculate()"></td><td class="profit muted-box">0</td><td class="staff muted-box">0</td><td class="owner muted-box">0</td></tr>
  </tbody>
  <tfoot>
    <!-- ‡∏¢‡πâ‡∏≤‡∏¢‡πÅ‡∏ñ‡∏ß '‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' ‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° -->
    <tr>
      <td>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</td>
      <td>-</td>
      <td id="totalProfit">0</td>
      <td id="totalStaff">0</td>
      <td id="totalOwner">0</td>
    </tr>

    <tr>
      <td colspan="5">
        <div class="sales-total">
          <div style="font-weight:600;">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏Å‡∏£‡∏≠‡∏Å‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£):</div>
          <div><input id="totalSalesInput" type="number" min="0" value="0" onchange="calculate()"></div>
          <div>‡∏ö‡∏≤‡∏ó</div>
        </div>

        <!-- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô / ‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á 2 ‡∏ä‡πà‡∏≠‡∏á) -->
        <div class="below-sales" style="margin-top:10px;">
          <div>‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <strong><span id="totalCostDisplay">0.00</span> ‡∏ö‡∏≤‡∏ó</strong></div>
          <div>‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <strong><span id="totalExpenseDisplay">0.00</span> ‡∏ö‡∏≤‡∏ó</strong></div>
          <div>‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <strong><span id="totalCombinedDisplay">0.00</span> ‡∏ö‡∏≤‡∏ó</strong></div>
        </div>

      </td>
    </tr>

  </tfoot>
</table>

<button onclick="clearAll()">‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>

<script>
// ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô (‡∏•‡πá‡∏≠‡∏Å‡πÑ‡∏ß‡πâ)
const costList = { "‡∏ä‡∏µ‡∏™‡πÄ‡∏Ñ‡πâ‡∏Å":25, "‡πÑ‡∏Å‡πà‡∏´‡∏¢‡∏≠‡∏á":20, "‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏¥‡πà‡∏°":10, "‡πÄ‡∏õ‡∏µ‡πä‡∏¢‡∏∞":25, "‡∏ö‡∏£‡∏≤‡∏ß‡∏ô‡∏µ‡πà":15, "‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á‡πÄ‡∏à":20 };

// ‡∏Ñ‡πà‡∏≤‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠
const SHIPPING = 250;
const ICE = 30;
const INTERNET = 6;

// ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡πà‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤
document.getElementById('shippingDisplay').textContent = SHIPPING;
document.getElementById('iceDisplay').textContent = ICE;
document.getElementById('internetDisplay').textContent = INTERNET;

function calculate() {
  // ‡∏≠‡πà‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å
  const totalSaleInput = parseFloat(document.getElementById('totalSalesInput').value) || 0;

  // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏£‡∏≠‡∏Å
  const rent = parseFloat(document.getElementById("rent").value) || 0;
  const electric = parseFloat(document.getElementById("electric").value) || 0;
  const other = parseFloat(document.getElementById("other").value) || 0;

  const totalExpense = SHIPPING + ICE + INTERNET + rent + electric + other;

  const rows = Array.from(document.querySelectorAll("#productTable tr"));

  // ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ñ‡∏ß: qty, cost
  const rowData = rows.map(row=>{
    const name = row.cells[0].innerText;
    const qty = parseFloat(row.querySelector(".qty").value) || 0;
    const cost = qty * (costList[name] || 0);
    return { row, name, qty, cost, allocatedSale:0, grossProfit:0, allocatedExpense:0, netProfit:0 };
  });

  const sumCost = rowData.reduce((s,r)=>s + r.cost, 0);

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ (‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ä‡πà‡∏≠‡∏á)
  document.getElementById('totalCostDisplay').textContent = sumCost.toFixed(2);
  document.getElementById('totalExpenseDisplay').textContent = totalExpense.toFixed(2);

  // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ä‡πà‡∏≠‡∏á '‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢
  const totalCombined = sumCost + totalExpense;
  document.getElementById('totalCombinedDisplay').textContent = totalCombined.toFixed(2);

  // ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏ï‡∏≤‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (cost)
  if (sumCost > 0 && totalSaleInput > 0) {
    rowData.forEach(r=>{
      r.allocatedSale = totalSaleInput * (r.cost / sumCost);
      r.grossProfit = r.allocatedSale - r.cost;
    });
  } else {
    // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (sumCost == 0) ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÉ‡∏´‡πâ allocatedSale = 0 ‡πÅ‡∏•‡∏∞ grossProfit = -cost
    rowData.forEach(r=>{
      r.allocatedSale = 0;
      r.grossProfit = -r.cost;
    });
  }

  const sumGrossProfit = rowData.reduce((s,r)=>s + r.grossProfit, 0);

  // ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢: ‡∏ñ‡πâ‡∏≤ sumGrossProfit > 0 ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô grossProfit; ‡∏ñ‡πâ‡∏≤ <=0 ‡πÉ‡∏ä‡πâ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (cost)
  if (sumGrossProfit > 0) {
    rowData.forEach(r=>{
      r.allocatedExpense = (r.grossProfit / sumGrossProfit) * totalExpense;
      r.netProfit = r.grossProfit - r.allocatedExpense;
    });
  } else {
    // ‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏∏‡∏ô (‡∏ñ‡πâ‡∏≤ sumCost == 0 ‡∏à‡∏∞‡πÑ‡∏î‡πâ allocatedExpense = 0)
    rowData.forEach(r=>{
      r.allocatedExpense = sumCost > 0 ? (r.cost / sumCost) * totalExpense : 0;
      r.netProfit = r.grossProfit - r.allocatedExpense;
    });
  }

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÅ‡∏ñ‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏£‡∏ß‡∏°
  let totalProfit = 0, totalStaff = 0, totalOwner = 0;
  rowData.forEach(r=>{
    const staff = r.netProfit * 0.8;
    const owner = r.netProfit * 0.2;

    r.row.querySelector(".profit").textContent = r.netProfit.toFixed(2);
    r.row.querySelector(".staff").textContent = staff.toFixed(2);
    r.row.querySelector(".owner").textContent = owner.toFixed(2);

    totalProfit += r.netProfit;
    totalStaff += staff;
    totalOwner += owner;
  });

  // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏£‡∏ß‡∏°
  document.getElementById("totalProfit").textContent = totalProfit.toFixed(2);
  document.getElementById("totalStaff").textContent = totalStaff.toFixed(2);
  document.getElementById("totalOwner").textContent = totalOwner.toFixed(2);
}

function clearAll(){
  // ‡∏•‡πâ‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏à‡∏≥‡∏ô‡∏ß‡∏ô) ‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° ‡πÅ‡∏ï‡πà‡∏Ñ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡πÜ ‡πÑ‡∏ß‡πâ
  document.querySelectorAll("#productTable .qty").forEach(i=>i.value=0);
  document.getElementById('totalSalesInput').value = 0;
  calculate();
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
window.addEventListener('DOMContentLoaded', calculate);
</script>

</body>
</html>
